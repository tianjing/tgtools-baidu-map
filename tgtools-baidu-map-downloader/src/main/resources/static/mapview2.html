<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="Generator" content="EditPlus®">
    <meta name="Author" content="">
    <meta name="Keywords" content="">
    <meta name="Description" content="">
    <title>Document</title>
<!--    <link rel="stylesheet" href="ui/leaflet1.3/leaflet.css">-->

    <script src="js/jquery-1.11.3.min.js"></script>
    <script src="webjars/map/leaflet/leafletboot1.js"></script>

    <!--    <script src="ui/leaflet1.3/leaflet-src.js"></script>-->


<!--    <script src="ui/leaflet1.3/proj4/proj4.js"></script>-->
<!--    <script src="ui/leaflet1.3/proj4/proj4leaflet.js"></script>-->
<!--    <script src="ui/leaflet1.3/leaflet-baidu/tileLayer.baidu.js"></script>-->

</head>
<body style="font-size:20px;letter-spacing:2px;line-height:1.5em;font-family: Helvetica, 'Hiragino Sans GB', 'Microsoft Yahei', '微软雅黑', Arial, sans-serif;text-align: center;">
<div style="width:1080px;margin:auto;text-align: left;border:1px solid #eee;padding:12px">
    leaflet使用百度地图，叠加层使用硬件/谷歌坐标。<br>

    leaflet默认使用硬件/谷歌坐标，使用百度地图需要进行坐标偏移。就是把<strong>硬件/谷歌坐标</strong>转换成<strong>百度坐标</strong>。<br>

    此方法是直接在地图投影方法出设置偏移。具体如下：
    <ul>
        <li>1、引入支持leaflet的proj4(https://github.com/kartena/Proj4Leaflet)</li>
        <li>2、引入自定义百度地图层 tileLayer.baidu.js</li>
        <li>3、leaflet地图初始化时crs参数设置为L.CRS.Baidu,layers设置为L.tileLayer.baidu</li>
    </ul>
</div>
<div style="width:1080px;xheight:500px;margin:auto;border:1px solid #eee;padding:12px">
    示例：
    <br>
    22.532934684, 114.0547117002是谷歌地图坐标
    <br>
    <img src="test.png" alt="">
</div>
<div id="mapdiv" style="width:1100px;height:500px;margin:auto"></div>
源码：
<div style="width:1080px;height:500px;margin:auto;text-align: left;border:1px solid #eee;padding:12px">
    &lthtml> <br>
    &lthead &gt; <br>
    &ltscript src="ui/js/jquery-1.11.3.min.js" &gt;&lt/script &gt; <br>
    &ltscript src="ui/leaflet1.3/leaflet-src.js" &gt;&lt/script &gt; <br>
    &ltscript src="ui/leaflet1.3/Proj4Leaflet/lib/<font size="" color="red">proj4.js</font>" &gt;&lt/script &gt; <br>
    &ltscript src="ui/leaflet1.3/Proj4Leaflet/src/<font size="" color="red">proj4leaflet.js</font>" &gt;&lt/script &gt;
    <br>
    &ltscript src="ui/leaflet1.3/leaflet-baidu/<font size="" color="red">tileLayer.baidu.js</font>" &gt;&lt/script &gt;
    <br>
    &lt/head &gt; <br>
    &ltbody &gt; <br>
    &ltdiv id="mapdiv" &gt;&lt/div &gt; <br>
    &lt/body &gt; <br>
    &ltscript type="text/javascript" &gt; <br>
    &lt!-- <br>
    $(document).ready(function(){ <br>
    &nbsp;var options = { <br>
    &nbsp;&nbsp;&nbsp;center: [22.532934684, 114.0547117002], <br>
    &nbsp;&nbsp; zoom: 15, <br>
    &nbsp;&nbsp; crs: <font size="" color="red">L.CRS.Baidu</font>, <br>
    &nbsp;&nbsp; layers: <font size="" color="red">[new L.tileLayer.baidu({ layer:
    'custom',customid:'midnight'})] </font><br>
    };<br>
    var map = L.map("mapdiv", options);<br>
    L.marker([22.532934684, 114.0547117002]).addTo(map).bindTooltip("会展中心").openTooltip();<br>
    }); <br>
    //-- &gt; <br>
    &lt/script &gt; <br>
    &lt/html &gt; <br>

</div>
</body>
<script type="text/javascript">
 <!--
	$(document).ready(function(){
		var options = {
            center: [32.05000,118.78333], // The initial center(baidu BD-09 format) of map
            zoom: 8, // initial zoom of map
			crs: L.CRS.Baidu,
			layers: [new L.tileLayer.baidu({
			layer: 'custom',
			customid:'midnight',
			url:{'custom':'http://127.0.0.1:8080/baidu/custom/tile?&x={x}&y={y}&z={z}&scale=1&customid={customid}'}
			})]
        };
        var map = L.map("mapdiv", options);
		L.marker([32.05000,118.78333]).addTo(map).bindTooltip("南京").openTooltip();
	});
 //-->


</script>
</html>
